<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ma boîte à loc' Angevine | Location Maine-et-Loire</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Lora:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="logo-brand"><h1>Ma boîte à loc' Angevine</h1></div>
        <nav class="main-nav">
            <ul>
                <li><a href="#" onclick="showSection('accueil')" id="nav-accueil">Accueil</a></li>
                <li><a href="#" onclick="showSection('catalogue')" id="nav-catalogue">Catalogue</a></li>
                <li><a href="#" onclick="showSection('contact')" id="nav-contact">Contact</a></li>
            </ul>
        </nav>
        <div class="utility-icons">
            <a href="#" id="cart-link" onclick="showSection('panier')">Demande (<span id="cart-count">0</span>)</a>
        </div>
    </header>

    <main>
        <nav class="cat-nav" id="catalogue-nav" style="display: none;"></nav>

        <!-- ACCUEIL -->
        <div id="accueil-section" class="content-section">
            <div class="hero-content" style="text-align: center; padding: 40px 10px;">
                <h2>Location de Matériel en Maine-et-Loire</h2>
                <p>Equipements de qualité à Rives-du-Loir-en-Anjou. Solutions de proximité pour vos événements et travaux.</p>
                <button onclick="showSection('catalogue')" class="primary-action-btn">Découvrir le Catalogue</button>
            </div>
            
            <div class="carousel-container" id="carousel-container">
                <div class="carousel-track" id="carousel-track"></div>
                <button class="carousel-nav-btn" id="prev-btn" onclick="moveCarousel(-1)">❮</button>
                <button class="carousel-nav-btn" id="next-btn" onclick="moveCarousel(1)">❯</button>
                <div id="carousel-indicators"></div>
            </div>

            <div class="modality-cards-container">
                <div class="modality-card"><h4>Paiement</h4><p>Espèces ou virement instantané. Caution demandée.</p></div>
                <div class="modality-card"><h4>Livraison</h4><p>Service de livraison possible sur devis dans tout le 49.</p></div>
                <div class="modality-card"><h4>Facturation</h4><p>Facture détaillée disponible pour les professionnels.</p></div>
            </div>
        </div>

        <!-- CATALOGUE -->
        <div id="catalogue-section" class="content-section">
            <h2 style="text-align:center;">Notre Catalogue</h2>
            <div id="search-bar"><input type="text" id="product-search" onkeyup="searchProducts()" placeholder="Rechercher (ex: video, table...)"></div>
            <div id="product-list-container"><p id="loading-message">Chargement...</p></div>
        </div>

        <!-- PANIER -->
        <div id="panier-section" class="content-section">
            <h2>Votre Demande</h2>
            <div id="cart-items-container"></div>
            <div id="cart-summary" style="background: var(--card-bg); padding: 20px; border-radius: 10px; margin-top: 20px;">
                <form id="reservation-form" method="POST" action="https://formsubmit.co/maboitealocangevine@gmail.com">
                    <label><input type="checkbox" id="delivery-checkbox" onchange="handleDeliveryChange()"> Livraison souhaitée (sur devis)</label>
                    <div id="delivery-address-group" style="display:none; margin-top:10px;">
                        <textarea id="delivery-address" placeholder="Adresse complète" style="width:100%; padding:10px;"></textarea>
                    </div>
                    <p>Total Estimation : <strong id="cart-total-estimate">0,00 €</strong></p>
                    <p>Total Cautions : <strong id="cart-total-caution">0,00 €</strong></p>
                    <input type="email" id="user-email" placeholder="Votre Email" required style="width:100%; padding:10px; margin: 10px 0;">
                    <textarea id="reservation-message" placeholder="Précisions..." style="width:100%; padding:10px;"></textarea>
                    <input type="hidden" name="_next" value="https://maboitealocangevine.github.io/website/merci.html">
                    <input type="hidden" name="_replyto" id="hidden-replyto"><input type="hidden" name="_subject" id="hidden-subject">
                    <textarea name="Récapitulatif" id="email-body-content" style="display: none;"></textarea>
                    <button type="submit" class="primary-action-btn" style="width:100%; margin-top:15px;" disabled>Envoyer la demande</button>
                </form>
            </div>
        </div>

        <!-- CONTACT -->
        <div id="contact-section" class="content-section">
            <h2>Contact & Accès</h2>
            <div class="modality-card">
                <p><strong>📞 Tél :</strong> 06 52 98 23 48</p>
                <p><strong>📧 Email :</strong> maboitealocangevine@gmail.com</p>
                <p><strong>📍 Adresse :</strong> 5 impasse les Rochebruyeres, 49140 RIVES-DU-LOIR</p>
            </div>
        </div>
    </main>

    <a href="https://wa.me/33652982348" class="whatsapp-btn" target="_blank">💬 WhatsApp</a>

    <!-- MODALE -->
    <div id="product-modal" class="modal">
        <div class="modal-content">
            <span style="float:right; cursor:pointer; font-size:1.5rem;" onclick="closeModal()">×</span>
            <h3 id="modal-title"></h3>
            <div class="modal-body">
                <img id="modal-image" src=""><p id="modal-description"></p>
                <div class="modal-form">
                    <label>Qté : <input type="number" id="modal-quantity" value="1" min="1"></label>
                    <label>Début : <input type="date" id="modal-start-date"></label>
                    <label>Fin : <input type="date" id="modal-end-date"></label>
                </div>
                <button onclick="addToCartFromModal()" class="primary-action-btn" style="width:100%">Ajouter au panier</button>
            </div>
        </div>
    </div>

    <div id="toast-notification"></div>

    <script src="app-ui.js"></script>
    <script src="app-catalog.js"></script>
    <script src="app-cart.js"></script>
    <script src="app-main.js"></script>
</body>
</html>